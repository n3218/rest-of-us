(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{210:function(e,a){},218:function(e,a,t){"use strict";t.r(a);var s=t(0),r=t.n(s),c=t(12),l=t(11),n=t(13),m=t(6),i=t(185),u=t.n(i);a.default=()=>{const e=Object(s.useRef)(null),a=Object(s.useRef)(null),t=Object(s.useRef)(null),i=Object(s.useContext)(c.a),o=Object(s.useContext)(l.a),[h,p]=Object(n.a)({fieldValue:"",chatMessages:[]});Object(s.useEffect)(()=>{i.isChatOpen&&(a.current.focus(),o({type:"clearUnreadChatCount"}))},[i.isChatOpen]),Object(s.useEffect)(()=>(e.current=u()("http://localhost:8080"),e.current.on("chatFromServer",e=>{p(a=>{a.chatMessages.push(e)})}),()=>e.current.disconnect()),[]),Object(s.useEffect)(()=>{t.current.scrollTop=t.current.scrollHeight,h.chatMessages.length&&!i.isChatOpen&&o({type:"incrementUnreadChatCount"})},[h.chatMessages]);return r.a.createElement("div",{id:"chat-wrapper",className:"chat-wrapper shadow border-top border-left border-right "+(i.isChatOpen?"chat-wrapper--is-visible":"")},r.a.createElement("div",{className:"chat-title-bar bg-primary"},"Chat",r.a.createElement("span",{className:"chat-title-bar-close",onClick:()=>o({type:"closeChat"})},r.a.createElement("i",{className:"fas fa-times-circle"}))),r.a.createElement("div",{ref:t,id:"chat",className:"chat-log"},h.chatMessages.map((e,a)=>e.username==i.user.username?r.a.createElement("div",{key:a,className:"chat-self"},r.a.createElement("div",{className:"chat-message"},r.a.createElement("div",{className:"chat-message-inner bg-primary"},e.message)),r.a.createElement("img",{className:"chat-avatar avatar-tiny",src:e.avatar})):r.a.createElement("div",{key:a,className:"chat-other"},r.a.createElement(m.b,{to:"/profile/"+e.username},r.a.createElement("img",{className:"avatar-tiny",src:e.avatar})),r.a.createElement("div",{className:"chat-message"},r.a.createElement("div",{className:"chat-message-inner"},r.a.createElement(m.b,{to:"/profile/"+e.username},r.a.createElement("strong",null,e.username,": ")),e.message))))),r.a.createElement("form",{onSubmit:a=>{a.preventDefault(),e.current.emit("chatFromBrowser",{message:h.fieldValue,token:i.user.token}),p(e=>{e.chatMessages.push({message:h.fieldValue,username:i.user.username,avatar:i.user.avatar}),e.fieldValue=""})},id:"chatForm",className:"chat-form border-top"},r.a.createElement("input",{value:h.fieldValue,onChange:e=>{const a=e.target.value;p(e=>{e.fieldValue=a})},ref:a,type:"text",className:"chat-field",id:"chatField",placeholder:"Type a messageâ€¦",autoComplete:"off"})))}}}]);